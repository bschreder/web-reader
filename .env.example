# ============================================================================
# Web Reader - Environment Configuration
# ============================================================================
# Copy this file to .env and customize values for your environment
# This single .env file is shared by all services via docker-compose env_file

# ============================================================================
# GENERAL SETTINGS
# ============================================================================
NODE_ENV=development
LOG_LEVEL=info              # debug | info | warn | error
LOG_TARGET=console          # console | file | both
LOG_FILE=logs/app.log       # Path for log file when LOG_TARGET includes "file"

# ============================================================================
# FRONTEND (TanStack Start)
# ============================================================================
FRONTEND_PORT=3000
VITE_API_URL=http://localhost:5000
VITE_WS_URL=ws://localhost:5000

# ============================================================================
# BACKEND API (FastAPI)
# ============================================================================
API_HOST=0.0.0.0
API_PORT=5000
CORS_ORIGINS=http://localhost:3000

# Task Management
MAX_CONCURRENT_TASKS=5      # Max simultaneous research tasks
DEFAULT_TIMEOUT=120         # Default task timeout in seconds

# ============================================================================
# LANGCHAIN ORCHESTRATOR
# ============================================================================
LANGCHAIN_HOST=langchain
LANGCHAIN_PORT=8001

# Ollama Configuration
OLLAMA_HOST=ollama
OLLAMA_PORT=11434
OLLAMA_MODEL=qwen3:8b       # Model to use (qwen3:8b, llama3.2, mistral, etc.)

# FastMCP Configuration
FASTMCP_HOST=fastmcp
FASTMCP_PORT=3000

# Agent Configuration
MAX_ITERATIONS=15           # Max agent iterations before stopping
MAX_LINK_DEPTH=3            # Default max link depth (0 = unlimited)
MAX_PAGES=20                # Default max pages per task (0 = unlimited)
TIME_BUDGET=120             # Default time budget in seconds per task

# ============================================================================
# FASTMCP SERVER (Browser Automation)
# ============================================================================
MCP_SERVER_PORT=3000

# Playwright Configuration
PLAYWRIGHT_HOST=playwright
PLAYWRIGHT_PORT=3002
BROWSER_TYPE=chromium       # chromium | firefox | webkit

# Rate Limiting
ENABLE_RATE_LIMITING=true
RATE_LIMIT_REQUESTS=5       # Max requests per window
RATE_LIMIT_WINDOW=90        # Window duration in seconds
REQUEST_DELAY_MIN=10        # Minimum delay between requests (seconds)
REQUEST_DELAY_MAX=20        # Maximum delay between requests (seconds)

# Bot Protection
RESPECT_ROBOTS_TXT=true
MAX_BROWSER_CONTEXTS=5      # Max simultaneous browser contexts

# ============================================================================
# BROWSER BEHAVIOR
# ============================================================================
DEFAULT_TIMEOUT=30000       # Default navigation timeout (ms)
WAIT_UNTIL=networkidle      # Page load event: load | domcontentloaded | networkidle

# ============================================================================
# DOMAIN FILTERING
# ============================================================================
# Domain allow/deny lists are configured in:
#   - config/allowed-domains.txt (empty = allow all except disallowed)
#   - config/disallowed-domains.txt (domains to block)
# Format: One domain per line, wildcards supported (*.example.com)

# ============================================================================
# DATA PERSISTENCE
# ============================================================================
DATA_DIR=./data             # Task artifacts storage
LOGS_DIR=./logs             # Application logs
CONFIG_DIR=./config         # Configuration files

# Data Retention
DATA_RETENTION_DAYS=30      # Auto-delete tasks older than N days (0 = never)

# ============================================================================
# SECURITY (Future Enhancement)
# ============================================================================
# JWT_SECRET=your-secret-key-here
# JWT_ALGORITHM=HS256
# JWT_EXPIRATION=3600

# API Rate Limiting (Future)
# API_RATE_LIMIT_UNAUTHENTICATED=100   # Requests per hour
# API_RATE_LIMIT_AUTHENTICATED=1000    # Requests per hour

# ============================================================================
# MONITORING (Future Enhancement)
# ============================================================================
# ENABLE_METRICS=false
# METRICS_PORT=9090
# LANGSMITH_API_KEY=your-langsmith-key
# LANGSMITH_PROJECT=web-reader
